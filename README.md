# HoReCa SaaS Platform

–ú–Ω–æ–≥–æ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è SaaS –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ HoReCa (Hotels, Restaurants, Cafes).

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø—ã

#### **Platform Owner** (–í–ª–∞–¥–µ–ª–µ—Ü –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã)
- **–î–æ—Å—Ç—É–ø**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- **–ú–∞—Ä—à—Ä—É—Ç—ã**: `/owner/*` - Owner Console
- **–ü—Ä–∞–≤–∞**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PLATFORM_OWNER_EMAIL` –≤ `.env.local`

#### **Organization Roles** (–†–æ–ª–∏ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)
1. **OWNER** - –í–ª–∞–¥–µ–ª–µ—Ü –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

2. **ADMIN** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–∫—Ä–æ–º–µ OWNER)

3. **MANAGER** - –ú–µ–Ω–µ–¥–∂–µ—Ä
   - –£–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∞
   - –î–æ—Å—Ç—É–ø –∫ –æ—Ç—á–µ—Ç–∞–º –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ

4. **EMPLOYEE** - –°–æ—Ç—Ä—É–¥–Ω–∏–∫
   - –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
   - –†–∞–±–æ—Ç–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

#### **–ü—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã** (–Ω–µ —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `/` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `/pricing` - –ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏
- `/api/auth/*` - NextAuth endpoints

#### **–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã** (—Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `/dashboard` - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- `/billing` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- `/org/*` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π
- `/api/secure/*` - –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ API endpoints

#### **Owner –º–∞—Ä—à—Ä—É—Ç—ã** (—Ç–æ–ª—å–∫–æ –¥–ª—è Platform Owner)
- `/owner/*` - Owner Console

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

```env
# Database
DATABASE_URL="postgresql://..."
SHADOW_DATABASE_URL="postgresql://...?schema=shadow&sslmode=require"

# NextAuth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key"

# Local Authentication
# No external OAuth providers needed

# Platform Owner
PLATFORM_OWNER_EMAIL="your-email@example.com"

# Stripe
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Platform Owner

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–∞—à email –≤ `PLATFORM_OWNER_EMAIL`
2. –ü—Ä–∏ –ø–µ—Ä–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å —ç—Ç–∏–º email –≤—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∞ Platform Owner
3. –î–æ—Å—Ç—É–ø –∫ `/owner` –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º

## üöÄ –ó–∞–ø—É—Å–∫

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É
npx prisma db push

# –ó–∞–ø—É—Å—Ç–∏—Ç—å seed (—Å–æ–∑–¥–∞—Ç—å —Ä–æ–ª–∏)
npx prisma db seed

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
npx prisma generate
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
npm run dev
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ (app)/              # –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/      # –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ labeling/       # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑–º–µ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ files/          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ learning/       # –û–±—É—á–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ (owner)/            # Owner Console
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ owner/         # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ api/auth/          # NextAuth API routes
‚îÇ   ‚îî‚îÄ‚îÄ pricing/           # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–ª–∞–Ω–æ–≤
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ AppNav.tsx         # –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ AuthButtons.tsx    # –ö–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts            # NextAuth –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ guards.ts          # Guard —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ prisma.ts          # Prisma Client
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma      # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts            # Seed —Å–∫—Ä–∏–ø—Ç
‚îî‚îÄ‚îÄ middleware.ts          # Middleware –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Guard —É—Ç–∏–ª–∏—Ç—ã

```typescript
// –¢—Ä–µ–±–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
const session = await requireSession()

// –¢—Ä–µ–±–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∞ Platform Owner
const session = await requirePlatformOwner()

// –¢—Ä–µ–±–æ–≤–∞—Ç—å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
const session = await requireTenant()

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const { session, role } = await hasRole('ADMIN')

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª—é–±—É—é –∏–∑ —Ä–æ–ª–µ–π
const { session, roles } = await hasAnyRole(['ADMIN', 'MANAGER'])
```

### Middleware –∑–∞—â–∏—Ç–∞

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/api/auth/signin` –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ Platform Owner –¥–ª—è `/owner/*` –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ó–∞—â–∏—Ç–∞ API endpoints —á–µ—Ä–µ–∑ `/api/secure/*`

## üéØ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ email/–ø–∞—Ä–æ–ª—å
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å –∏–º–µ–Ω–µ–º `<email>-org`
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ä–æ–ª—å OWNER –≤ —Å–≤–æ–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
4. –ü–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ `/dashboard` –∏ –¥—Ä—É–≥–∏–º –∑–∞—â–∏—â–µ–Ω–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º

### Platform Owner
1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `PLATFORM_OWNER_EMAIL`
2. –ü—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ–ª—É—á–∞–µ—Ç `isPlatformOwner = true`
3. –ü–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ `/owner` - Owner Console
4. –ú–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–æ–ª–µ–π
1. –û–±–Ω–æ–≤–∏—Ç–µ `prisma/seed.ts`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npx prisma db seed`
3. –û–±–Ω–æ–≤–∏—Ç–µ guard —É—Ç–∏–ª–∏—Ç—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
1. –î–æ–±–∞–≤—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç –≤ `middleware.ts` config.matcher
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ guard —É—Ç–∏–ª–∏—Ç—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
3. –û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –≤ `AppNav.tsx`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
1. –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ `app/(app)/`
2. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ guard —É—Ç–∏–ª–∏—Ç—ã
3. –û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ middleware –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üì¶ –ú–æ–¥—É–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ (—Å–∫–µ–ª–µ—Ç)

### üè∑Ô∏è –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ (`/labeling`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞–º–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–æ–∫–æ–≤ –≥–æ–¥–Ω–æ—Å—Ç–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- –ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫ —Å QR-–∫–æ–¥–∞–º–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–æ–∫–æ–≤ –≥–æ–¥–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º

**–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**:
- `Product` - –ø—Ä–æ–¥—É–∫—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ä–æ–∫–µ –≥–æ–¥–Ω–æ—Å—Ç–∏
- `Label` - –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–µ —ç—Ç–∏–∫–µ—Ç–∫–∏ —Å –¥–∞—Ç–∞–º–∏

### üìÅ –§–∞–π–ª—ã (`/files`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ –ø–∞–ø–∫–∞–º
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É

**–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**:
- `File` - —Ñ–∞–π–ª—ã —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ –ø—É—Ç—è–º–∏

### üéì –û–±—É—á–µ–Ω–∏–µ (`/learning`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–Ω–∞–Ω–∏—è–º–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –°–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –∏ —É—Ä–æ–∫–æ–≤
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–π

**–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**:
- `Course` - –∫—É—Ä—Å—ã –æ–±—É—á–µ–Ω–∏—è
- `Lesson` - —É—Ä–æ–∫–∏ –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–æ–≤

## üí≥ Mock Billing

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Mock Billing

Mock Billing - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –∏–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö API.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞
```env
DEV_PAYMENT_PROVIDER="mock"
DEV_PAYMENT_ALLOW_IN_PROD="false"
```

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–û—Ñ–æ—Ä–º–∏—Ç—å BASIC/PRO" –ø–æ–¥–ø–∏—Å–∫–∞ —Å—Ä–∞–∑—É –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
- **Mock-–æ–ø–ª–∞—Ç–∞**: –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `ACTIVE`, `currentPeriodEnd` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ +30 –¥–Ω–µ–π
- **–ü–æ—Ä—Ç–∞–ª-–∑–∞–≥–ª—É—à–∫–∞**: –ö–Ω–æ–ø–∫–∞ "–£–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–æ–π" –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ `/billing`
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**: –í production mock –æ—Ç–∫–ª—é—á–µ–Ω (–µ—Å–ª–∏ `DEV_PAYMENT_ALLOW_IN_PROD !== "true"`)

#### –î–æ—Å—Ç—É–ø –∫ –±–∏–ª–ª–∏–Ω–≥—É
- –ü—É–Ω–∫—Ç –º–µ–Ω—é "–ë–∏–ª–ª–∏–Ω–≥" –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å —Ä–æ–ª—è–º–∏ `OWNER` –∏–ª–∏ `ADMIN`
- –ó–∞—â–∏—â–µ–Ω middleware - —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

#### –ó–∞–º–µ–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏

–î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏:

1. **YooKassa** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –†–æ—Å—Å–∏–∏):
   ```typescript
   // lib/payments/yookassa.ts
   export class YooKassaProvider implements PaymentProvider {
     // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è YooKassa API
   }
   ```

2. **Stripe** (–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏):
   ```typescript
   // lib/payments/stripe.ts  
   export class StripeProvider implements PaymentProvider {
     // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Stripe API
   }
   ```

3. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞**:
   ```env
   DEV_PAYMENT_PROVIDER="yookassa"  # –∏–ª–∏ "stripe"
   ```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
```
lib/payments/
‚îú‚îÄ‚îÄ types.ts          # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ mock.ts          # Mock –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚îú‚îÄ‚îÄ yookassa.ts      # YooKassa –ø—Ä–æ–≤–∞–π–¥–µ—Ä (TODO)
‚îú‚îÄ‚îÄ stripe.ts        # Stripe –ø—Ä–æ–≤–∞–π–¥–µ—Ä (TODO)
‚îî‚îÄ‚îÄ index.ts         # –§–∞–±—Ä–∏–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
```

#### API Endpoints
- `POST /api/billing/checkout` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –æ–ø–ª–∞—Ç—ã
- `POST /api/billing/portal` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–æ–π  
- `POST /api/billing/webhook` - –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook'–æ–≤ –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º# horeca-control
